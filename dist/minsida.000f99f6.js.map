{"mappings":"AAAA;AAEA,oBAAoB;AACpB,IAAI,aAAa,SAAS,cAAc,CAAC;AAEzC,WAAW,gBAAgB,CAAC,SAAS,CAAC;IAClC,MAAM,cAAc;IAEpB,IAAI,mBAAmB,SAAS,cAAc,CAAC,iBAAiB,KAAK;IACrE,IAAI,mBAAmB,SAAS,cAAc,CAAC,iBAAiB,KAAK;IAErE,UAAU,kBAAkB;AAChC;AAEA,eAAe,UAAU,QAAQ,EAAE,QAAQ;IACvC,IAAI,WAAW,MAAM,MAAM,mCAAmC;QAC1D,QAAQ;QACR,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YACjB,UAAU;YACV,UAAU;QACd;IACJ;IAEA,IAAI,OAAO,MAAM,SAAS,IAAI;IAE9B,8CAA8C;IAC9C,IAAI,eAAe,MAAM,MAAM,oCAAoC;QAC/D,SAAS;YACL,iBAAiB,YAAY,KAAK,QAAQ,CAAC,KAAK;QACpD;IACJ;IAEA,qCAAqC;IACrC,IAAG,CAAC,aAAa,EAAE,EACf,MAAM,IAAI,MAAM;SAEb;QACH,sCAAsC;QACtC,aAAa,OAAO,CAAC,SAAS,KAAK,QAAQ,CAAC,KAAK;QAEjD,wCAAwC;QACxC,aAAa,OAAO,CAAC,QAAQ;QAE7B,uBAAuB;QACvB,SAAS,IAAI,GAAC;IAClB;AACJ","sources":["src/js/login.js"],"sourcesContent":["\"use strict\"; \r\n\r\n//Logga in användare\r\nlet loginBtnEL = document.getElementById(\"loginBtn\"); \r\n\r\nloginBtnEL.addEventListener('click', (event) => {\r\n    event.preventDefault(); \r\n\r\n    let usernameLoginStr = document.getElementById(\"usernameLogin\").value; \r\n    let passwordLoginStr = document.getElementById(\"passwordLogin\").value; \r\n\r\n    loginUser(usernameLoginStr, passwordLoginStr); \r\n}); \r\n\r\nasync function loginUser(username, password) {\r\n    let response = await fetch(\"http://127.0.0.1:3000/api/login\", {\r\n        method: \"POST\", \r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            username: username,\r\n            password: password\r\n        })\r\n    }); \r\n\r\n    let data = await response.json(); \r\n\r\n    //Skickar med token för att nå skyddade sidan \r\n    let authResponse = await fetch('http://127.0.0.1:3000/api/mypage', {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + data.response.token\r\n        }\r\n    });\r\n\r\n    //om det inte är ok, något gått snett\r\n    if(!authResponse.ok) {\r\n        throw new Error(\"Något har gått fel vid authoriseringen!\");\r\n        //något ska hända på sidan \r\n    } else {\r\n        //lägger in JWT token i local storage \r\n        localStorage.setItem('token', data.response.token);\r\n\r\n        //lägge in användarnamn i local storage \r\n        localStorage.setItem('user', username)\r\n\r\n        //Flyttar till min sida\r\n        location.href=\"minsida.html\" \r\n    }\r\n}; "],"names":[],"version":3,"file":"minsida.000f99f6.js.map","sourceRoot":"/__parcel_source_root/"}